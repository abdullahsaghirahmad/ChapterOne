{"ast":null,"code":"var _jsxFileName = \"/Users/Projects/ChapterOne/src/components/features/BooksPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { BookCard } from './BookCard';\nimport { SearchBar } from './SearchBar';\nimport { api } from '../../services/api';\nimport { Switch } from '../ui/Switch';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\n// Interface for Pace objects that might be returned from API\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Helper function to safely extract value from an object or return the value itself\nconst extractValue = item => {\n  if (typeof item === 'object' && item !== null && 'value' in item) {\n    return item.value;\n  }\n  return (item === null || item === void 0 ? void 0 : item.toString()) || '';\n};\n\n// Custom book data for featured books\nconst featuredBooks = [{\n  id: \"sf-dune-1\",\n  title: \"Dune\",\n  author: \"Frank Herbert\",\n  publishedYear: 1965,\n  coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1555447414i/44767458.jpg\",\n  description: \"Set on the desert planet Arrakis, Dune is the story of the boy Paul Atreides, heir to a noble family tasked with ruling an inhospitable world where the only thing of value is the \\\"spice\\\" melange, a drug capable of extending life and enhancing consciousness.\",\n  rating: 4.7,\n  pace: \"Moderate\",\n  tone: [\"Epic\", \"Philosophical\", \"Political\", \"Atmospheric\", \"Complex\"],\n  themes: [\"Power\", \"Religion\", \"Ecology\", \"Politics\", \"Destiny\", \"Survival\"],\n  bestFor: [\"Science Fiction Fans\", \"Political Theorists\", \"Philosophers\", \"Environmental Scientists\"],\n  professions: [\"Political Scientists\", \"Ecologists\", \"Futurists\", \"Philosophers\"],\n  isExternal: false,\n  pageCount: 658,\n  categories: [\"Science Fiction\", \"Classic\", \"Space Opera\"]\n}, {\n  id: \"fantasy-lotr-1\",\n  title: \"The Lord of the Rings\",\n  author: \"J.R.R. Tolkien\",\n  publishedYear: 1954,\n  coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1566425108i/33.jpg\",\n  description: \"One Ring to rule them all, One Ring to find them, One Ring to bring them all and in the darkness bind them. In ancient times the Rings of Power were crafted by the Elven-smiths, and Sauron, the Dark Lord, forged the One Ring, filling it with his own power so that he could rule all others.\",\n  rating: 4.8,\n  pace: \"Slow\",\n  tone: [\"Epic\", \"Descriptive\", \"Mythic\", \"Poetic\", \"Adventure\"],\n  themes: [\"Good vs Evil\", \"Fellowship\", \"Heroism\", \"Power\", \"Sacrifice\", \"Journey\"],\n  bestFor: [\"Fantasy Lovers\", \"Literary Scholars\", \"Historians\", \"Linguists\"],\n  professions: [\"Writers\", \"Linguists\", \"Mythologists\", \"Historians\"],\n  isExternal: false,\n  pageCount: 1178,\n  categories: [\"Fantasy\", \"Classic\", \"Epic\"]\n}, {\n  id: \"romance-pride-1\",\n  title: \"Pride and Prejudice\",\n  author: \"Jane Austen\",\n  publishedYear: 1813,\n  coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1320399351i/1885.jpg\",\n  description: \"Since its immediate success in 1813, Pride and Prejudice has remained one of the most popular novels in the English language. Jane Austen called this brilliant work \\\"her own darling child\\\" and its vivacious heroine, Elizabeth Bennet, \\\"as delightful a creature as ever appeared in print.\\\"\",\n  rating: 4.6,\n  pace: \"Moderate\",\n  tone: [\"Witty\", \"Ironic\", \"Romantic\", \"Satirical\", \"Elegant\"],\n  themes: [\"Social Class\", \"Marriage\", \"Pride\", \"Prejudice\", \"Love\", \"Self-discovery\"],\n  bestFor: [\"Romance Readers\", \"Literary Critics\", \"Sociologists\", \"Feminists\"],\n  professions: [\"English Professors\", \"Sociologists\", \"Journalists\", \"Writers\"],\n  isExternal: false,\n  pageCount: 279,\n  categories: [\"Romance\", \"Classic\", \"Literary Fiction\"]\n}, {\n  id: \"nonfiction-thinking-1\",\n  title: \"Thinking, Fast and Slow\",\n  author: \"Daniel Kahneman\",\n  publishedYear: 2011,\n  coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1317793965i/11468377.jpg\",\n  description: \"In the international bestseller, Thinking, Fast and Slow, Daniel Kahneman, the renowned psychologist and winner of the Nobel Prize in Economics, takes us on a groundbreaking tour of the mind and explains the two systems that drive the way we think.\",\n  rating: 4.5,\n  pace: \"Slow\",\n  tone: [\"Academic\", \"Insightful\", \"Analytical\", \"Accessible\", \"Thought-provoking\"],\n  themes: [\"Psychology\", \"Decision Making\", \"Behavioral Economics\", \"Cognitive Biases\", \"Rationality\"],\n  bestFor: [\"Business Leaders\", \"Product Managers\", \"Decision Makers\", \"Psychology Enthusiasts\"],\n  professions: [\"Psychologists\", \"Economists\", \"Product Managers\", \"Executives\", \"Data Scientists\"],\n  isExternal: false,\n  pageCount: 499,\n  categories: [\"Psychology\", \"Non-fiction\", \"Economics\", \"Science\"]\n}];\nexport const BooksPage = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [books, setBooks] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [includeExternal, setIncludeExternal] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchType, setSearchType] = useState('all');\n\n  // Handle URL search parameters when component loads\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const queryParams = new URLSearchParams(location.search);\n        const queryFromUrl = queryParams.get('query');\n        const typeFromUrl = queryParams.get('type');\n        let data;\n\n        // If there's a search query in the URL, use it to filter books\n        if (queryFromUrl) {\n          setSearchQuery(queryFromUrl);\n          if (typeFromUrl) {\n            setSearchType(typeFromUrl);\n          }\n          console.log(`Searching for \"${queryFromUrl}\" in category \"${typeFromUrl || 'all'}\"`);\n          data = await api.searchBooks(queryFromUrl, typeFromUrl || 'all', includeExternal);\n        }\n        // Otherwise, fetch all books without any limit\n        else {\n          console.log('Fetching ALL books from API with no limit');\n          data = await api.getBooks(includeExternal);\n        }\n\n        // Process the books to handle all fields that might be objects\n        const processedData = data.map(book => {\n          // Process any string arrays that might be returned as JSON strings or objects\n          let processedThemes = book.themes;\n          let processedTone = book.tone;\n          let processedProfessions = book.professions;\n          let processedBestFor = book.bestFor;\n\n          // Handle if themes is a string (potentially a stringified array)\n          if (typeof book.themes === 'string') {\n            try {\n              // Try to parse as JSON\n              processedThemes = JSON.parse(book.themes);\n            } catch (e) {\n              processedThemes = book.themes.split(',').map(t => t.trim());\n            }\n          }\n\n          // Process arrays that might have objects or JSON strings\n          if (Array.isArray(processedThemes)) {\n            processedThemes = processedThemes.map(t => extractValue(t));\n          } else {\n            processedThemes = [];\n          }\n\n          // Handle tone the same way\n          if (typeof book.tone === 'string') {\n            try {\n              processedTone = JSON.parse(book.tone);\n            } catch (e) {\n              processedTone = book.tone.split(',').map(t => t.trim());\n            }\n          }\n          if (Array.isArray(processedTone)) {\n            processedTone = processedTone.map(t => extractValue(t));\n          } else {\n            processedTone = [];\n          }\n\n          // Handle professions the same way\n          if (typeof book.professions === 'string') {\n            try {\n              processedProfessions = JSON.parse(book.professions);\n            } catch (e) {\n              processedProfessions = book.professions.split(',').map(p => p.trim());\n            }\n          }\n          if (Array.isArray(processedProfessions)) {\n            processedProfessions = processedProfessions.map(p => extractValue(p));\n          } else {\n            processedProfessions = [];\n          }\n\n          // Handle bestFor field\n          if (typeof book.bestFor === 'string') {\n            try {\n              processedBestFor = JSON.parse(book.bestFor);\n            } catch (e) {\n              processedBestFor = book.bestFor.split(',').map(b => b.trim());\n            }\n          }\n          if (Array.isArray(processedBestFor)) {\n            processedBestFor = processedBestFor.map(b => extractValue(b));\n          } else {\n            // Default to empty array if bestFor is null/undefined\n            processedBestFor = [];\n          }\n\n          // Process pace field - ensure it's always a string\n          let processedPace = \"Moderate\"; // Default value\n\n          if (book.pace) {\n            if (typeof book.pace === 'object') {\n              // Safely access the value property\n              const paceObj = book.pace;\n              processedPace = paceObj.value || \"Moderate\";\n            } else if (typeof book.pace === 'string') {\n              processedPace = book.pace;\n            }\n          }\n\n          // Return processed book data with clean fields\n          return {\n            ...book,\n            pace: processedPace,\n            tone: processedTone,\n            themes: processedThemes,\n            professions: processedProfessions,\n            bestFor: processedBestFor\n          };\n        });\n        console.log(`TOTAL BOOKS FETCHED: ${processedData.length}`);\n        setBooks(processedData);\n\n        // If no books were loaded, check if we need to refresh the page\n        if (processedData.length === 0 && !queryFromUrl) {\n          console.error('No books loaded. API might not be responding properly.');\n        }\n      } catch (err) {\n        console.error('Error fetching books:', err);\n        setError(err instanceof Error ? err.message : 'Failed to load books. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [location.search, includeExternal]);\n  const handleExternalToggle = () => {\n    const newIncludeExternal = !includeExternal;\n    setIncludeExternal(newIncludeExternal);\n\n    // Refresh the books with the new external API setting\n    if (searchQuery) {\n      // Reuse the current search with new setting\n      const searchParams = new URLSearchParams(location.search);\n      navigate(`/books?${searchParams.toString()}`);\n    } else {\n      // Just reload the current page to trigger the useEffect\n      // which will fetch all books with the new external setting\n      window.location.reload();\n    }\n  };\n\n  // Debug information for rendering\n  useEffect(() => {\n    console.log('RENDER DEBUG - Books length:', books.length);\n    console.log('RENDER DEBUG - Search query:', searchQuery);\n    console.log('RENDER DEBUG - Search type:', searchType);\n  }, [books.length, searchQuery, searchType]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-10\",\n      children: \"Loading books...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-10 text-red-600\",\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-primary-900\",\n        children: \"Book Recommendations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-primary-600\",\n        children: \"Discover books that match your interests and reading style\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n        onSearch: (query, type) => {\n          setSearchQuery(query || '');\n          setSearchType(type || 'all');\n          // Update URL to reflect the search\n          const searchParams = new URLSearchParams();\n          if (query) {\n            searchParams.set('query', query);\n            if (type && type !== 'all') {\n              searchParams.set('type', type);\n            }\n            navigate(`/books?${searchParams.toString()}`);\n          } else {\n            navigate('/books');\n          }\n        },\n        onMoodSelect: mood => {\n          setSearchQuery(mood || '');\n          setSearchType('mood');\n          // Update URL for mood search\n          const searchParams = new URLSearchParams();\n          searchParams.set('query', mood || '');\n          searchParams.set('type', 'mood');\n          navigate(`/books?${searchParams.toString()}`);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-end mt-4 space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Include more books from external sources\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          checked: includeExternal,\n          onChange: handleExternalToggle,\n          className: \"data-[state=checked]:bg-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), books.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-10\",\n      children: \"No books found. Try a different search or enable external sources.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 text-sm text-gray-600\",\n        children: searchQuery ? `Found ${books.length} books for \"${searchQuery}\"${searchType !== 'all' ? ` by ${searchType}` : ''}` : `Showing all ${books.length} books alphabetically by title`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid gap-6 grid-cols-1 lg:grid-cols-2\",\n        children: books.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n          title: book.title,\n          author: book.author,\n          coverImage: book.coverImage,\n          pace: book.pace,\n          tone: book.tone,\n          themes: book.themes,\n          description: book.description || \"No description available\",\n          bestFor: book.bestFor,\n          isExternal: book.isExternal || false\n        }, book.id || `${book.title}-${book.author}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 278,\n    columnNumber: 5\n  }, this);\n};\n_s(BooksPage, \"kDP41td87AlgzI7Js14pS52zsgU=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = BooksPage;\nvar _c;\n$RefreshReg$(_c, \"BooksPage\");","map":{"version":3,"names":["React","useEffect","useState","BookCard","SearchBar","api","Switch","useLocation","useNavigate","jsxDEV","_jsxDEV","extractValue","item","value","toString","featuredBooks","id","title","author","publishedYear","coverImage","description","rating","pace","tone","themes","bestFor","professions","isExternal","pageCount","categories","BooksPage","_s","location","navigate","books","setBooks","error","setError","loading","setLoading","includeExternal","setIncludeExternal","searchQuery","setSearchQuery","searchType","setSearchType","fetchData","queryParams","URLSearchParams","search","queryFromUrl","get","typeFromUrl","data","console","log","searchBooks","getBooks","processedData","map","book","processedThemes","processedTone","processedProfessions","processedBestFor","JSON","parse","e","split","t","trim","Array","isArray","p","b","processedPace","paceObj","length","err","Error","message","handleExternalToggle","newIncludeExternal","searchParams","window","reload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSearch","query","type","set","onMoodSelect","mood","checked","onChange","_c","$RefreshReg$"],"sources":["/Users/Projects/ChapterOne/src/components/features/BooksPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BookCard } from './BookCard';\nimport { SearchBar } from './SearchBar';\nimport { api } from '../../services/api';\nimport { Book, Pace } from '../../types';\nimport { Switch } from '../ui/Switch';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\n// Interface for Pace objects that might be returned from API\ninterface PaceObject {\n  type?: string;\n  value?: string;\n}\n\n// Helper function to safely extract value from an object or return the value itself\nconst extractValue = (item: any): string => {\n  if (typeof item === 'object' && item !== null && 'value' in item) {\n    return item.value;\n  }\n  return item?.toString() || '';\n};\n\n// Custom book data for featured books\nconst featuredBooks: Book[] = [\n  {\n    id: \"sf-dune-1\",\n    title: \"Dune\",\n    author: \"Frank Herbert\",\n    publishedYear: 1965,\n    coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1555447414i/44767458.jpg\",\n    description: \"Set on the desert planet Arrakis, Dune is the story of the boy Paul Atreides, heir to a noble family tasked with ruling an inhospitable world where the only thing of value is the \\\"spice\\\" melange, a drug capable of extending life and enhancing consciousness.\",\n    rating: 4.7,\n    pace: \"Moderate\",\n    tone: [\"Epic\", \"Philosophical\", \"Political\", \"Atmospheric\", \"Complex\"],\n    themes: [\"Power\", \"Religion\", \"Ecology\", \"Politics\", \"Destiny\", \"Survival\"],\n    bestFor: [\"Science Fiction Fans\", \"Political Theorists\", \"Philosophers\", \"Environmental Scientists\"],\n    professions: [\"Political Scientists\", \"Ecologists\", \"Futurists\", \"Philosophers\"],\n    isExternal: false,\n    pageCount: 658,\n    categories: [\"Science Fiction\", \"Classic\", \"Space Opera\"]\n  },\n  {\n    id: \"fantasy-lotr-1\",\n    title: \"The Lord of the Rings\",\n    author: \"J.R.R. Tolkien\",\n    publishedYear: 1954,\n    coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1566425108i/33.jpg\",\n    description: \"One Ring to rule them all, One Ring to find them, One Ring to bring them all and in the darkness bind them. In ancient times the Rings of Power were crafted by the Elven-smiths, and Sauron, the Dark Lord, forged the One Ring, filling it with his own power so that he could rule all others.\",\n    rating: 4.8,\n    pace: \"Slow\",\n    tone: [\"Epic\", \"Descriptive\", \"Mythic\", \"Poetic\", \"Adventure\"],\n    themes: [\"Good vs Evil\", \"Fellowship\", \"Heroism\", \"Power\", \"Sacrifice\", \"Journey\"],\n    bestFor: [\"Fantasy Lovers\", \"Literary Scholars\", \"Historians\", \"Linguists\"],\n    professions: [\"Writers\", \"Linguists\", \"Mythologists\", \"Historians\"],\n    isExternal: false,\n    pageCount: 1178,\n    categories: [\"Fantasy\", \"Classic\", \"Epic\"]\n  },\n  {\n    id: \"romance-pride-1\",\n    title: \"Pride and Prejudice\",\n    author: \"Jane Austen\",\n    publishedYear: 1813,\n    coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1320399351i/1885.jpg\",\n    description: \"Since its immediate success in 1813, Pride and Prejudice has remained one of the most popular novels in the English language. Jane Austen called this brilliant work \\\"her own darling child\\\" and its vivacious heroine, Elizabeth Bennet, \\\"as delightful a creature as ever appeared in print.\\\"\",\n    rating: 4.6,\n    pace: \"Moderate\",\n    tone: [\"Witty\", \"Ironic\", \"Romantic\", \"Satirical\", \"Elegant\"],\n    themes: [\"Social Class\", \"Marriage\", \"Pride\", \"Prejudice\", \"Love\", \"Self-discovery\"],\n    bestFor: [\"Romance Readers\", \"Literary Critics\", \"Sociologists\", \"Feminists\"],\n    professions: [\"English Professors\", \"Sociologists\", \"Journalists\", \"Writers\"],\n    isExternal: false,\n    pageCount: 279,\n    categories: [\"Romance\", \"Classic\", \"Literary Fiction\"]\n  },\n  {\n    id: \"nonfiction-thinking-1\",\n    title: \"Thinking, Fast and Slow\",\n    author: \"Daniel Kahneman\",\n    publishedYear: 2011,\n    coverImage: \"https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1317793965i/11468377.jpg\",\n    description: \"In the international bestseller, Thinking, Fast and Slow, Daniel Kahneman, the renowned psychologist and winner of the Nobel Prize in Economics, takes us on a groundbreaking tour of the mind and explains the two systems that drive the way we think.\",\n    rating: 4.5,\n    pace: \"Slow\",\n    tone: [\"Academic\", \"Insightful\", \"Analytical\", \"Accessible\", \"Thought-provoking\"],\n    themes: [\"Psychology\", \"Decision Making\", \"Behavioral Economics\", \"Cognitive Biases\", \"Rationality\"],\n    bestFor: [\"Business Leaders\", \"Product Managers\", \"Decision Makers\", \"Psychology Enthusiasts\"],\n    professions: [\"Psychologists\", \"Economists\", \"Product Managers\", \"Executives\", \"Data Scientists\"],\n    isExternal: false,\n    pageCount: 499,\n    categories: [\"Psychology\", \"Non-fiction\", \"Economics\", \"Science\"]\n  }\n];\n\nexport const BooksPage = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [books, setBooks] = useState<Book[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [includeExternal, setIncludeExternal] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchType, setSearchType] = useState('all');\n\n  // Handle URL search parameters when component loads\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const queryParams = new URLSearchParams(location.search);\n        const queryFromUrl = queryParams.get('query');\n        const typeFromUrl = queryParams.get('type');\n        \n        let data: Book[];\n        \n        // If there's a search query in the URL, use it to filter books\n        if (queryFromUrl) {\n          setSearchQuery(queryFromUrl);\n          if (typeFromUrl) {\n            setSearchType(typeFromUrl);\n          }\n          console.log(`Searching for \"${queryFromUrl}\" in category \"${typeFromUrl || 'all'}\"`);\n          data = await api.searchBooks(queryFromUrl, typeFromUrl || 'all', includeExternal);\n        } \n        // Otherwise, fetch all books without any limit\n        else {\n          console.log('Fetching ALL books from API with no limit');\n          data = await api.getBooks(includeExternal);\n        }\n        \n        // Process the books to handle all fields that might be objects\n        const processedData = data.map(book => {\n          // Process any string arrays that might be returned as JSON strings or objects\n          let processedThemes = book.themes;\n          let processedTone = book.tone;\n          let processedProfessions = book.professions;\n          let processedBestFor = book.bestFor;\n          \n          // Handle if themes is a string (potentially a stringified array)\n          if (typeof book.themes === 'string') {\n            try {\n              // Try to parse as JSON\n              processedThemes = JSON.parse(book.themes as string);\n            } catch (e) {\n              processedThemes = (book.themes as string).split(',').map((t: string) => t.trim());\n            }\n          }\n          \n          // Process arrays that might have objects or JSON strings\n          if (Array.isArray(processedThemes)) {\n            processedThemes = processedThemes.map((t: any) => extractValue(t));\n          } else {\n            processedThemes = [];\n          }\n\n          // Handle tone the same way\n          if (typeof book.tone === 'string') {\n            try {\n              processedTone = JSON.parse(book.tone as string);\n            } catch (e) {\n              processedTone = (book.tone as string).split(',').map((t: string) => t.trim());\n            }\n          }\n          \n          if (Array.isArray(processedTone)) {\n            processedTone = processedTone.map((t: any) => extractValue(t));\n          } else {\n            processedTone = [];\n          }\n          \n          // Handle professions the same way\n          if (typeof book.professions === 'string') {\n            try {\n              processedProfessions = JSON.parse(book.professions as string);\n            } catch (e) {\n              processedProfessions = (book.professions as string).split(',').map((p: string) => p.trim());\n            }\n          }\n          \n          if (Array.isArray(processedProfessions)) {\n            processedProfessions = processedProfessions.map((p: any) => extractValue(p));\n          } else {\n            processedProfessions = [];\n          }\n          \n          // Handle bestFor field\n          if (typeof book.bestFor === 'string') {\n            try {\n              processedBestFor = JSON.parse(book.bestFor as string);\n            } catch (e) {\n              processedBestFor = (book.bestFor as string).split(',').map((b: string) => b.trim());\n            }\n          }\n          \n          if (Array.isArray(processedBestFor)) {\n            processedBestFor = processedBestFor.map((b: any) => extractValue(b));\n          } else {\n            // Default to empty array if bestFor is null/undefined\n            processedBestFor = [];\n          }\n          \n          // Process pace field - ensure it's always a string\n          let processedPace: string = \"Moderate\";  // Default value\n          \n          if (book.pace) {\n            if (typeof book.pace === 'object') {\n              // Safely access the value property\n              const paceObj = book.pace as PaceObject;\n              processedPace = paceObj.value || \"Moderate\";\n            } else if (typeof book.pace === 'string') {\n              processedPace = book.pace;\n            }\n          }\n          \n          // Return processed book data with clean fields\n          return {\n            ...book,\n            pace: processedPace as Pace,\n            tone: processedTone,\n            themes: processedThemes,\n            professions: processedProfessions,\n            bestFor: processedBestFor\n          };\n        });\n        \n        console.log(`TOTAL BOOKS FETCHED: ${processedData.length}`);\n        setBooks(processedData);\n        \n        // If no books were loaded, check if we need to refresh the page\n        if (processedData.length === 0 && !queryFromUrl) {\n          console.error('No books loaded. API might not be responding properly.');\n        }\n      } catch (err) {\n        console.error('Error fetching books:', err);\n        setError(err instanceof Error ? err.message : 'Failed to load books. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n  }, [location.search, includeExternal]);\n\n  const handleExternalToggle = () => {\n    const newIncludeExternal = !includeExternal;\n    setIncludeExternal(newIncludeExternal);\n    \n    // Refresh the books with the new external API setting\n    if (searchQuery) {\n      // Reuse the current search with new setting\n      const searchParams = new URLSearchParams(location.search);\n      navigate(`/books?${searchParams.toString()}`);\n    } else {\n      // Just reload the current page to trigger the useEffect\n      // which will fetch all books with the new external setting\n      window.location.reload();\n    }\n  };\n\n  // Debug information for rendering\n  useEffect(() => {\n    console.log('RENDER DEBUG - Books length:', books.length);\n    console.log('RENDER DEBUG - Search query:', searchQuery);\n    console.log('RENDER DEBUG - Search type:', searchType);\n  }, [books.length, searchQuery, searchType]);\n\n  if (loading) {\n    return <div className=\"text-center py-10\">Loading books...</div>;\n  }\n\n  if (error) {\n    return <div className=\"text-center py-10 text-red-600\">Error: {error}</div>;\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"text-center space-y-4\">\n        <h1 className=\"text-3xl font-bold text-primary-900\">Book Recommendations</h1>\n        <p className=\"text-lg text-primary-600\">\n          Discover books that match your interests and reading style\n        </p>\n      </div>\n\n      {/* Search */}\n      <div className=\"max-w-3xl mx-auto\">\n        <SearchBar \n          onSearch={(query, type) => {\n            setSearchQuery(query || '');\n            setSearchType(type || 'all');\n            // Update URL to reflect the search\n            const searchParams = new URLSearchParams();\n            if (query) {\n              searchParams.set('query', query);\n              if (type && type !== 'all') {\n                searchParams.set('type', type);\n              }\n              navigate(`/books?${searchParams.toString()}`);\n            } else {\n              navigate('/books');\n            }\n          }}\n          onMoodSelect={(mood) => {\n            setSearchQuery(mood || '');\n            setSearchType('mood');\n            // Update URL for mood search\n            const searchParams = new URLSearchParams();\n            searchParams.set('query', mood || '');\n            searchParams.set('type', 'mood');\n            navigate(`/books?${searchParams.toString()}`);\n          }}\n        />\n        \n        {/* External API Toggle */}\n        <div className=\"flex items-center justify-end mt-4 space-x-2\">\n          <span className=\"text-sm text-gray-600\">Include more books from external sources</span>\n          <Switch\n            checked={includeExternal}\n            onChange={handleExternalToggle}\n            className=\"data-[state=checked]:bg-green-500\"\n          />\n        </div>\n      </div>\n\n      {/* Books Grid */}\n      {books.length === 0 ? (\n        <div className=\"text-center py-10\">No books found. Try a different search or enable external sources.</div>\n      ) : (\n        <div>\n          {/* Search result info */}\n          <div className=\"mb-4 text-sm text-gray-600\">\n            {searchQuery ? \n              `Found ${books.length} books for \"${searchQuery}\"${searchType !== 'all' ? ` by ${searchType}` : ''}` :\n              `Showing all ${books.length} books alphabetically by title`\n            }\n          </div>\n          \n          {/* Books grid */}\n          <div className=\"grid gap-6 grid-cols-1 lg:grid-cols-2\">\n            {books.map((book) => (\n              <BookCard\n                key={book.id || `${book.title}-${book.author}`}\n                title={book.title}\n                author={book.author}\n                coverImage={book.coverImage}\n                pace={book.pace as Pace}\n                tone={book.tone}\n                themes={book.themes}\n                description={book.description || \"No description available\"}\n                bestFor={book.bestFor}\n                isExternal={book.isExternal || false}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}