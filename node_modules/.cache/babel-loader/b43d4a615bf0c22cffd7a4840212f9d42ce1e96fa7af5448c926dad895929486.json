{"ast":null,"code":"import _objectSpread from\"/Users/ChapterOne/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{ThreadCard}from'./ThreadCard';import{PlusIcon}from'@heroicons/react/24/outline';import axios from'axios';import{useTheme}from'../../contexts/ThemeContext';// Define Thread interface\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Helper function to normalize tag data - extract it to reuse in other components too\nexport const normalizeTag=tag=>{if(!tag)return'';// Handle object with value property\nif(typeof tag==='object'&&tag!==null&&'value'in tag){return tag.value;}// Handle stringified object format like {\"\"value\"\": \"\"tag\"\"}\nif(typeof tag==='string'){// Remove curly braces and quotes to extract clean tag names\nlet cleanTag=tag;// Handle malformed JSON like \"{\\\"finance\\\"\" or \"\\\"economics\\\"\" or \"\\\"investing\\\"}\"\nif(cleanTag.includes('{')||cleanTag.includes('}')||cleanTag.includes('\"')){// Remove all JSON formatting characters\ncleanTag=cleanTag.replace(/[{}]/g,'')// Remove curly braces\n.replace(/\\\\\"/g,'')// Remove escaped quotes\n.replace(/\"/g,'')// Remove regular quotes\n.trim();}// If it's still empty or just whitespace, return empty string\nif(!cleanTag||cleanTag.trim()===''){return'';}return cleanTag;}// If it's just a string or other type, return its string representation\nreturn String(tag);};export const ThreadPage=()=>{const{theme}=useTheme();const[showNewThreadForm,setShowNewThreadForm]=useState(false);const[newThreadTitle,setNewThreadTitle]=useState('');const[newThreadDescription,setNewThreadDescription]=useState('');const[selectedTags,setSelectedTags]=useState([]);const[customTag,setCustomTag]=useState('');const[threads,setThreads]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');// Popular tags from existing threads and common book topics\nconst popularTags=['finance','economics','investing','leadership','management','team','design','ux','ui','product','startup','business','technology','self-help','psychology','philosophy','science','history','biography','fiction','non-fiction','mystery','romance','fantasy','sci-fi','career','productivity','marketing','sales','entrepreneurship','personal-development','health','wellness','education','parenting'];// Generate tag suggestions based on title and description\nconst generateTagSuggestions=useCallback((title,description)=>{const text=\"\".concat(title,\" \").concat(description).toLowerCase();const suggestions=[];// Check for keyword matches in popular tags\npopularTags.forEach(tag=>{if(text.includes(tag.toLowerCase())||text.includes(tag.replace('-',' '))||text.includes(tag.replace('-',''))){suggestions.push(tag);}});// Add some contextual suggestions based on common patterns\nif(text.includes('book')||text.includes('read')||text.includes('recommend')){if(!suggestions.includes('books'))suggestions.push('books');}if(text.includes('startup')||text.includes('entrepreneur')){if(!suggestions.includes('startup'))suggestions.push('startup');if(!suggestions.includes('business'))suggestions.push('business');}if(text.includes('money')||text.includes('financial')||text.includes('invest')){if(!suggestions.includes('finance'))suggestions.push('finance');}if(text.includes('leader')||text.includes('manage')||text.includes('team')){if(!suggestions.includes('leadership'))suggestions.push('leadership');}if(text.includes('design')||text.includes('user experience')||text.includes('interface')){if(!suggestions.includes('design'))suggestions.push('design');if(!suggestions.includes('ux'))suggestions.push('ux');}// Always include 'general' as a fallback if no specific tags found\nif(suggestions.length===0){suggestions.push('general');}return suggestions.slice(0,5);// Limit to 5 suggestions\n},[]);// Update tag suggestions when title or description changes\nuseEffect(()=>{if(newThreadTitle||newThreadDescription){const suggestions=generateTagSuggestions(newThreadTitle,newThreadDescription);// Only auto-add suggestions if no tags are selected yet\nif(selectedTags.length===0){setSelectedTags(suggestions);}}},[newThreadTitle,newThreadDescription,selectedTags.length,generateTagSuggestions]);const addTag=tag=>{const cleanTag=tag.trim().toLowerCase();if(cleanTag&&!selectedTags.includes(cleanTag)){setSelectedTags([...selectedTags,cleanTag]);}};const removeTag=tagToRemove=>{setSelectedTags(selectedTags.filter(tag=>tag!==tagToRemove));};const handleAddCustomTag=()=>{if(customTag.trim()){addTag(customTag);setCustomTag('');}};const handleKeyPress=e=>{if(e.key==='Enter'){e.preventDefault();handleAddCustomTag();}};// Fetch threads from API\nuseEffect(()=>{const fetchThreads=async()=>{try{setLoading(true);const response=await axios.get('http://localhost:3001/api/threads');console.log('Threads response:',response.data);// Process the threads to ensure tags are properly formatted\nconst processedThreads=response.data.map(thread=>{// Process tags to ensure they're an array of strings\nlet processedTags=thread.tags;// If tags is a string that looks like a stringified array, parse it\nif(typeof thread.tags==='string'){try{processedTags=JSON.parse(thread.tags);}catch(_unused){// If parsing fails, split by comma\nprocessedTags=thread.tags.split(',').map(t=>t.trim());}}// Normalize each tag to extract clean string values\nif(Array.isArray(processedTags)){processedTags=processedTags.map(normalizeTag);}else if(processedTags){// If somehow not an array, make it a single-item array\nprocessedTags=[normalizeTag(processedTags)];}else{// Default to empty array if tags is null/undefined\nprocessedTags=[];}return _objectSpread(_objectSpread({},thread),{},{tags:processedTags});});setThreads(processedThreads);setLoading(false);}catch(err){console.error('Error fetching threads:',err);setError('Failed to load threads. Please try again later.');setLoading(false);}};fetchThreads();},[]);const handleSubmitThread=async e=>{e.preventDefault();try{const response=await axios.post('http://localhost:3001/api/threads',{title:newThreadTitle,description:newThreadDescription,tags:selectedTags.length>0?selectedTags:['general']});// Make sure to process the new thread's tags too\nconst newThread=_objectSpread(_objectSpread({},response.data),{},{tags:Array.isArray(response.data.tags)?response.data.tags.map(normalizeTag):[]});setThreads([...threads,newThread]);setShowNewThreadForm(false);setNewThreadTitle('');setNewThreadDescription('');setSelectedTags([]);setCustomTag('');}catch(err){console.error('Error creating thread:',err);setError('Unable to create thread at the moment. The backend service is experiencing technical difficulties. Please try again later or contact support if the issue persists.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold transition-colors duration-300 \".concat(theme==='light'?'text-primary-900':theme==='dark'?'text-white':'bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent'),children:\"Book Recommendation Threads\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowNewThreadForm(true),className:\"flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'bg-primary-600 hover:bg-primary-700 text-white':theme==='dark'?'bg-blue-600 hover:bg-blue-700 text-white':'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'),children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"w-5 h-5 mr-2\"}),\"New Thread\"]})]}),showNewThreadForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-6 transition-colors duration-300 \".concat(theme==='light'?'bg-white border border-gray-200':theme==='dark'?'bg-gray-800 border border-gray-700':'bg-gradient-to-br from-pink-50 to-purple-50 border border-purple-200'),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 transition-colors duration-300 \".concat(theme==='light'?'text-gray-900':theme==='dark'?'text-white':'text-purple-900'),children:\"Start a New Thread\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitThread,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium mb-1 transition-colors duration-300 \".concat(theme==='light'?'text-primary-700':theme==='dark'?'text-gray-300':'text-purple-700'),children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",value:newThreadTitle,onChange:e=>setNewThreadTitle(e.target.value),className:\"w-full px-3 py-2 border rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 \".concat(theme==='light'?'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200':theme==='dark'?'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200':'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'),placeholder:\"e.g., Books like The Midnight Library\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium mb-1 transition-colors duration-300 \".concat(theme==='light'?'text-primary-700':theme==='dark'?'text-gray-300':'text-purple-700'),children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:newThreadDescription,onChange:e=>setNewThreadDescription(e.target.value),className:\"w-full px-3 py-2 border rounded-lg min-h-[100px] transition-colors duration-300 focus:outline-none focus:ring-2 \".concat(theme==='light'?'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200':theme==='dark'?'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200':'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'),placeholder:\"Describe what you're looking for...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 transition-colors duration-300 \".concat(theme==='light'?'text-primary-700':theme==='dark'?'text-gray-300':'text-purple-700'),children:\"Tags\"}),selectedTags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:selectedTags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm transition-colors duration-300 \".concat(theme==='light'?'bg-primary-100 text-primary-700 border border-primary-200':theme==='dark'?'bg-gray-700 text-gray-300 border border-gray-600':'bg-gradient-to-r from-pink-100 to-purple-100 text-purple-700 border border-purple-200'),children:[tag,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeTag(tag),className:\"ml-2 hover:scale-110 transition-transform duration-200 \".concat(theme==='light'?'text-primary-500 hover:text-primary-700':theme==='dark'?'text-gray-400 hover:text-gray-200':'text-purple-500 hover:text-purple-700'),children:\"\\xD7\"})]},tag))})}),newThreadTitle||newThreadDescription?/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mb-2 transition-colors duration-300 \".concat(theme==='light'?'text-gray-600':theme==='dark'?'text-gray-400':'text-purple-600'),children:\"Suggested tags (click to add):\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:generateTagSuggestions(newThreadTitle,newThreadDescription).filter(tag=>!selectedTags.includes(tag)).map(tag=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>addTag(tag),className:\"px-3 py-1 rounded-full text-sm border-2 border-dashed transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'border-primary-300 text-primary-600 hover:bg-primary-50 hover:border-primary-400':theme==='dark'?'border-gray-600 text-gray-400 hover:bg-gray-700 hover:border-gray-500':'border-purple-300 text-purple-600 hover:bg-purple-50 hover:border-purple-400'),children:[\"+ \",tag]},tag))})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customTag,onChange:e=>setCustomTag(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Add custom tag...\",className:\"flex-1 px-3 py-2 border rounded-lg text-sm transition-colors duration-300 focus:outline-none focus:ring-2 \".concat(theme==='light'?'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200':theme==='dark'?'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200':'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200')}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddCustomTag,disabled:!customTag.trim(),className:\"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed \".concat(theme==='light'?'bg-primary-600 hover:bg-primary-700 text-white disabled:hover:bg-primary-600':theme==='dark'?'bg-blue-600 hover:bg-blue-700 text-white disabled:hover:bg-blue-600':'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'),children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNewThreadForm(false),className:\"px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'bg-gray-200 hover:bg-gray-300 text-gray-700':theme==='dark'?'bg-gray-600 hover:bg-gray-500 text-gray-300':'bg-purple-200 hover:bg-purple-300 text-purple-700'),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'bg-primary-600 hover:bg-primary-700 text-white':theme==='dark'?'bg-blue-600 hover:bg-blue-700 text-white':'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'),children:\"Create Thread\"})]})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 transition-colors duration-300 \".concat(theme==='light'?'text-gray-600':theme==='dark'?'text-gray-300':'text-purple-600'),children:\"Loading threads...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 transition-colors duration-300 \".concat(theme==='light'?'text-red-500':theme==='dark'?'text-red-400':'text-pink-600'),children:error}),!loading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4 md:grid-cols-2\",children:threads.length>0?threads.map(thread=>/*#__PURE__*/_jsx(ThreadCard,{id:thread.id,title:thread.title,description:thread.description,upvotes:thread.upvotes,comments:thread.comments,timestamp:new Date(thread.createdAt).toLocaleDateString(),tags:thread.tags||[]},thread.id)):/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 text-center py-8 transition-colors duration-300 \".concat(theme==='light'?'text-gray-600':theme==='dark'?'text-gray-300':'text-purple-600'),children:\"No threads found. Be the first to create one!\"})})]});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","ThreadCard","PlusIcon","axios","useTheme","jsx","_jsx","jsxs","_jsxs","normalizeTag","tag","value","cleanTag","includes","replace","trim","String","ThreadPage","theme","showNewThreadForm","setShowNewThreadForm","newThreadTitle","setNewThreadTitle","newThreadDescription","setNewThreadDescription","selectedTags","setSelectedTags","customTag","setCustomTag","threads","setThreads","loading","setLoading","error","setError","popularTags","generateTagSuggestions","title","description","text","concat","toLowerCase","suggestions","forEach","push","length","slice","addTag","removeTag","tagToRemove","filter","handleAddCustomTag","handleKeyPress","e","key","preventDefault","fetchThreads","response","get","console","log","data","processedThreads","map","thread","processedTags","tags","JSON","parse","_unused","split","t","Array","isArray","_objectSpread","err","handleSubmitThread","post","newThread","className","children","onClick","onSubmit","htmlFor","type","id","onChange","target","placeholder","required","onKeyPress","disabled","upvotes","comments","timestamp","Date","createdAt","toLocaleDateString"],"sources":["/Users/ChapterOne/src/components/features/ThreadPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { ThreadCard } from './ThreadCard';\nimport { PlusIcon } from '@heroicons/react/24/outline';\nimport axios from 'axios';\nimport { useTheme } from '../../contexts/ThemeContext';\n\n// Define Thread interface\ninterface Thread {\n  id: string;\n  title: string;\n  description: string;\n  upvotes: number;\n  comments: number;\n  tags: string[];\n  createdAt: string;\n  updatedAt: string;\n  books?: any[];\n}\n\n// Helper function to normalize tag data - extract it to reuse in other components too\nexport const normalizeTag = (tag: any): string => {\n  if (!tag) return '';\n  \n  // Handle object with value property\n  if (typeof tag === 'object' && tag !== null && 'value' in tag) {\n    return tag.value;\n  }\n  \n  // Handle stringified object format like {\"\"value\"\": \"\"tag\"\"}\n  if (typeof tag === 'string') {\n    // Remove curly braces and quotes to extract clean tag names\n    let cleanTag = tag;\n    \n    // Handle malformed JSON like \"{\\\"finance\\\"\" or \"\\\"economics\\\"\" or \"\\\"investing\\\"}\"\n    if (cleanTag.includes('{') || cleanTag.includes('}') || cleanTag.includes('\"')) {\n      // Remove all JSON formatting characters\n      cleanTag = cleanTag\n        .replace(/[{}]/g, '') // Remove curly braces\n        .replace(/\\\\\"/g, '') // Remove escaped quotes\n        .replace(/\"/g, '') // Remove regular quotes\n        .trim();\n    }\n    \n    // If it's still empty or just whitespace, return empty string\n    if (!cleanTag || cleanTag.trim() === '') {\n      return '';\n    }\n    \n    return cleanTag;\n  }\n  \n  // If it's just a string or other type, return its string representation\n  return String(tag);\n};\n\nexport const ThreadPage = () => {\n  const { theme } = useTheme();\n  const [showNewThreadForm, setShowNewThreadForm] = useState(false);\n  const [newThreadTitle, setNewThreadTitle] = useState('');\n  const [newThreadDescription, setNewThreadDescription] = useState('');\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\n  const [customTag, setCustomTag] = useState('');\n  const [threads, setThreads] = useState<Thread[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Popular tags from existing threads and common book topics\n  const popularTags = [\n    'finance', 'economics', 'investing', 'leadership', 'management', 'team',\n    'design', 'ux', 'ui', 'product', 'startup', 'business', 'technology',\n    'self-help', 'psychology', 'philosophy', 'science', 'history', 'biography',\n    'fiction', 'non-fiction', 'mystery', 'romance', 'fantasy', 'sci-fi',\n    'career', 'productivity', 'marketing', 'sales', 'entrepreneurship',\n    'personal-development', 'health', 'wellness', 'education', 'parenting'\n  ];\n\n  // Generate tag suggestions based on title and description\n  const generateTagSuggestions = useCallback((title: string, description: string): string[] => {\n    const text = `${title} ${description}`.toLowerCase();\n    const suggestions: string[] = [];\n\n    // Check for keyword matches in popular tags\n    popularTags.forEach(tag => {\n      if (text.includes(tag.toLowerCase()) || \n          text.includes(tag.replace('-', ' ')) ||\n          text.includes(tag.replace('-', ''))) {\n        suggestions.push(tag);\n      }\n    });\n\n    // Add some contextual suggestions based on common patterns\n    if (text.includes('book') || text.includes('read') || text.includes('recommend')) {\n      if (!suggestions.includes('books')) suggestions.push('books');\n    }\n    if (text.includes('startup') || text.includes('entrepreneur')) {\n      if (!suggestions.includes('startup')) suggestions.push('startup');\n      if (!suggestions.includes('business')) suggestions.push('business');\n    }\n    if (text.includes('money') || text.includes('financial') || text.includes('invest')) {\n      if (!suggestions.includes('finance')) suggestions.push('finance');\n    }\n    if (text.includes('leader') || text.includes('manage') || text.includes('team')) {\n      if (!suggestions.includes('leadership')) suggestions.push('leadership');\n    }\n    if (text.includes('design') || text.includes('user experience') || text.includes('interface')) {\n      if (!suggestions.includes('design')) suggestions.push('design');\n      if (!suggestions.includes('ux')) suggestions.push('ux');\n    }\n\n    // Always include 'general' as a fallback if no specific tags found\n    if (suggestions.length === 0) {\n      suggestions.push('general');\n    }\n\n    return suggestions.slice(0, 5); // Limit to 5 suggestions\n  }, []);\n\n  // Update tag suggestions when title or description changes\n  useEffect(() => {\n    if (newThreadTitle || newThreadDescription) {\n      const suggestions = generateTagSuggestions(newThreadTitle, newThreadDescription);\n      // Only auto-add suggestions if no tags are selected yet\n      if (selectedTags.length === 0) {\n        setSelectedTags(suggestions);\n      }\n    }\n  }, [newThreadTitle, newThreadDescription, selectedTags.length, generateTagSuggestions]);\n\n  const addTag = (tag: string) => {\n    const cleanTag = tag.trim().toLowerCase();\n    if (cleanTag && !selectedTags.includes(cleanTag)) {\n      setSelectedTags([...selectedTags, cleanTag]);\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setSelectedTags(selectedTags.filter(tag => tag !== tagToRemove));\n  };\n\n  const handleAddCustomTag = () => {\n    if (customTag.trim()) {\n      addTag(customTag);\n      setCustomTag('');\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleAddCustomTag();\n    }\n  };\n\n  // Fetch threads from API\n  useEffect(() => {\n    const fetchThreads = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get<Thread[]>('http://localhost:3001/api/threads');\n        console.log('Threads response:', response.data);\n        \n        // Process the threads to ensure tags are properly formatted\n        const processedThreads = response.data.map(thread => {\n          // Process tags to ensure they're an array of strings\n          let processedTags = thread.tags;\n          \n          // If tags is a string that looks like a stringified array, parse it\n          if (typeof thread.tags === 'string') {\n            try {\n              processedTags = JSON.parse(thread.tags as any);\n            } catch {\n              // If parsing fails, split by comma\n              processedTags = (thread.tags as any).split(',').map((t: string) => t.trim());\n            }\n          }\n          \n          // Normalize each tag to extract clean string values\n          if (Array.isArray(processedTags)) {\n            processedTags = processedTags.map(normalizeTag);\n          } else if (processedTags) {\n            // If somehow not an array, make it a single-item array\n            processedTags = [normalizeTag(processedTags)];\n          } else {\n            // Default to empty array if tags is null/undefined\n            processedTags = [];\n          }\n          \n          return {\n            ...thread,\n            tags: processedTags\n          };\n        });\n        \n        setThreads(processedThreads);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching threads:', err);\n        setError('Failed to load threads. Please try again later.');\n        setLoading(false);\n      }\n    };\n\n    fetchThreads();\n  }, []);\n\n  const handleSubmitThread = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post<Thread>('http://localhost:3001/api/threads', {\n        title: newThreadTitle,\n        description: newThreadDescription,\n        tags: selectedTags.length > 0 ? selectedTags : ['general']\n      });\n      \n      // Make sure to process the new thread's tags too\n      const newThread = {\n        ...response.data,\n        tags: Array.isArray(response.data.tags) \n          ? response.data.tags.map(normalizeTag) \n          : []\n      };\n      \n      setThreads([...threads, newThread]);\n      setShowNewThreadForm(false);\n      setNewThreadTitle('');\n      setNewThreadDescription('');\n      setSelectedTags([]);\n      setCustomTag('');\n    } catch (err) {\n      console.error('Error creating thread:', err);\n      setError('Unable to create thread at the moment. The backend service is experiencing technical difficulties. Please try again later or contact support if the issue persists.');\n    }\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <h1 className={`text-2xl font-bold transition-colors duration-300 ${\n          theme === 'light'\n            ? 'text-primary-900'\n            : theme === 'dark'\n            ? 'text-white'\n            : 'bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent'\n        }`}>\n          Book Recommendation Threads\n        </h1>\n        <button\n          onClick={() => setShowNewThreadForm(true)}\n          className={`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 ${\n            theme === 'light'\n              ? 'bg-primary-600 hover:bg-primary-700 text-white'\n              : theme === 'dark'\n              ? 'bg-blue-600 hover:bg-blue-700 text-white'\n              : 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'\n          }`}\n        >\n          <PlusIcon className=\"w-5 h-5 mr-2\" />\n          New Thread\n        </button>\n      </div>\n\n      {/* New Thread Form */}\n      {showNewThreadForm && (\n        <div className={`rounded-lg p-6 transition-colors duration-300 ${\n          theme === 'light'\n            ? 'bg-white border border-gray-200'\n            : theme === 'dark'\n            ? 'bg-gray-800 border border-gray-700'\n            : 'bg-gradient-to-br from-pink-50 to-purple-50 border border-purple-200'\n        }`}>\n          <h2 className={`text-xl font-semibold mb-4 transition-colors duration-300 ${\n            theme === 'light'\n              ? 'text-gray-900'\n              : theme === 'dark'\n              ? 'text-white'\n              : 'text-purple-900'\n          }`}>\n            Start a New Thread\n          </h2>\n          <form onSubmit={handleSubmitThread} className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"title\" className={`block text-sm font-medium mb-1 transition-colors duration-300 ${\n                theme === 'light'\n                  ? 'text-primary-700'\n                  : theme === 'dark'\n                  ? 'text-gray-300'\n                  : 'text-purple-700'\n              }`}>\n                Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                value={newThreadTitle}\n                onChange={(e) => setNewThreadTitle(e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 ${\n                  theme === 'light'\n                    ? 'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200'\n                    : theme === 'dark'\n                    ? 'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200'\n                    : 'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'\n                }`}\n                placeholder=\"e.g., Books like The Midnight Library\"\n                required\n              />\n            </div>\n            <div>\n              <label htmlFor=\"description\" className={`block text-sm font-medium mb-1 transition-colors duration-300 ${\n                theme === 'light'\n                  ? 'text-primary-700'\n                  : theme === 'dark'\n                  ? 'text-gray-300'\n                  : 'text-purple-700'\n              }`}>\n                Description\n              </label>\n              <textarea\n                id=\"description\"\n                value={newThreadDescription}\n                onChange={(e) => setNewThreadDescription(e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg min-h-[100px] transition-colors duration-300 focus:outline-none focus:ring-2 ${\n                  theme === 'light'\n                    ? 'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200'\n                    : theme === 'dark'\n                    ? 'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200'\n                    : 'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'\n                }`}\n                placeholder=\"Describe what you're looking for...\"\n                required\n              />\n            </div>\n\n            {/* Tags Section */}\n            <div>\n              <label className={`block text-sm font-medium mb-2 transition-colors duration-300 ${\n                theme === 'light'\n                  ? 'text-primary-700'\n                  : theme === 'dark'\n                  ? 'text-gray-300'\n                  : 'text-purple-700'\n              }`}>\n                Tags\n              </label>\n\n              {/* Selected Tags */}\n              {selectedTags.length > 0 && (\n                <div className=\"mb-3\">\n                  <div className=\"flex flex-wrap gap-2\">\n                    {selectedTags.map((tag) => (\n                      <span\n                        key={tag}\n                        className={`inline-flex items-center px-3 py-1 rounded-full text-sm transition-colors duration-300 ${\n                          theme === 'light'\n                            ? 'bg-primary-100 text-primary-700 border border-primary-200'\n                            : theme === 'dark'\n                            ? 'bg-gray-700 text-gray-300 border border-gray-600'\n                            : 'bg-gradient-to-r from-pink-100 to-purple-100 text-purple-700 border border-purple-200'\n                        }`}\n                      >\n                        {tag}\n                        <button\n                          type=\"button\"\n                          onClick={() => removeTag(tag)}\n                          className={`ml-2 hover:scale-110 transition-transform duration-200 ${\n                            theme === 'light'\n                              ? 'text-primary-500 hover:text-primary-700'\n                              : theme === 'dark'\n                              ? 'text-gray-400 hover:text-gray-200'\n                              : 'text-purple-500 hover:text-purple-700'\n                          }`}\n                        >\n                          Ã—\n                        </button>\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Suggested Tags */}\n              {newThreadTitle || newThreadDescription ? (\n                <div className=\"mb-3\">\n                  <p className={`text-xs mb-2 transition-colors duration-300 ${\n                    theme === 'light'\n                      ? 'text-gray-600'\n                      : theme === 'dark'\n                      ? 'text-gray-400'\n                      : 'text-purple-600'\n                  }`}>\n                    Suggested tags (click to add):\n                  </p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {generateTagSuggestions(newThreadTitle, newThreadDescription)\n                      .filter(tag => !selectedTags.includes(tag))\n                      .map((tag) => (\n                        <button\n                          key={tag}\n                          type=\"button\"\n                          onClick={() => addTag(tag)}\n                          className={`px-3 py-1 rounded-full text-sm border-2 border-dashed transition-all duration-300 hover:scale-105 ${\n                            theme === 'light'\n                              ? 'border-primary-300 text-primary-600 hover:bg-primary-50 hover:border-primary-400'\n                              : theme === 'dark'\n                              ? 'border-gray-600 text-gray-400 hover:bg-gray-700 hover:border-gray-500'\n                              : 'border-purple-300 text-purple-600 hover:bg-purple-50 hover:border-purple-400'\n                          }`}\n                        >\n                          + {tag}\n                        </button>\n                      ))}\n                  </div>\n                </div>\n              ) : null}\n\n              {/* Add Custom Tag */}\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={customTag}\n                  onChange={(e) => setCustomTag(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  placeholder=\"Add custom tag...\"\n                  className={`flex-1 px-3 py-2 border rounded-lg text-sm transition-colors duration-300 focus:outline-none focus:ring-2 ${\n                    theme === 'light'\n                      ? 'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200'\n                      : theme === 'dark'\n                      ? 'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200'\n                      : 'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'\n                  }`}\n                />\n                <button\n                  type=\"button\"\n                  onClick={handleAddCustomTag}\n                  disabled={!customTag.trim()}\n                  className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${\n                    theme === 'light'\n                      ? 'bg-primary-600 hover:bg-primary-700 text-white disabled:hover:bg-primary-600'\n                      : theme === 'dark'\n                      ? 'bg-blue-600 hover:bg-blue-700 text-white disabled:hover:bg-blue-600'\n                      : 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'\n                  }`}\n                >\n                  Add\n                </button>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => setShowNewThreadForm(false)}\n                className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 ${\n                  theme === 'light'\n                    ? 'bg-gray-200 hover:bg-gray-300 text-gray-700'\n                    : theme === 'dark'\n                    ? 'bg-gray-600 hover:bg-gray-500 text-gray-300'\n                    : 'bg-purple-200 hover:bg-purple-300 text-purple-700'\n                }`}\n              >\n                Cancel\n              </button>\n              <button type=\"submit\" className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 ${\n                theme === 'light'\n                  ? 'bg-primary-600 hover:bg-primary-700 text-white'\n                  : theme === 'dark'\n                  ? 'bg-blue-600 hover:bg-blue-700 text-white'\n                  : 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'\n              }`}>\n                Create Thread\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {/* Loading and Error States */}\n      {loading && (\n        <div className={`text-center py-8 transition-colors duration-300 ${\n          theme === 'light'\n            ? 'text-gray-600'\n            : theme === 'dark'\n            ? 'text-gray-300'\n            : 'text-purple-600'\n        }`}>\n          Loading threads...\n        </div>\n      )}\n      {error && (\n        <div className={`text-center py-8 transition-colors duration-300 ${\n          theme === 'light'\n            ? 'text-red-500'\n            : theme === 'dark'\n            ? 'text-red-400'\n            : 'text-pink-600'\n        }`}>\n          {error}\n        </div>\n      )}\n\n      {/* Threads List */}\n      {!loading && !error && (\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          {threads.length > 0 ? (\n            threads.map((thread) => (\n              <ThreadCard\n                key={thread.id}\n                id={thread.id}\n                title={thread.title}\n                description={thread.description}\n                upvotes={thread.upvotes}\n                comments={thread.comments}\n                timestamp={new Date(thread.createdAt).toLocaleDateString()}\n                tags={thread.tags || []}\n              />\n            ))\n          ) : (\n            <div className={`col-span-2 text-center py-8 transition-colors duration-300 ${\n              theme === 'light'\n                ? 'text-gray-600'\n                : theme === 'dark'\n                ? 'text-gray-300'\n                : 'text-purple-600'\n            }`}>\n              No threads found. Be the first to create one!\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}