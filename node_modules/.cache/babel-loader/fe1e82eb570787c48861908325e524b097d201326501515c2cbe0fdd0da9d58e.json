{"ast":null,"code":"import _objectSpread from\"/Users/Projects/ChapterOne/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{ThreadCard}from'./ThreadCard';import{PlusIcon}from'@heroicons/react/24/outline';import axios from'axios';import{useTheme}from'../../contexts/ThemeContext';// Define Thread interface\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Helper function to normalize tag data - extract it to reuse in other components too\nexport const normalizeTag=tag=>{if(!tag)return'';// Handle object with value property\nif(typeof tag==='object'&&tag!==null&&'value'in tag){return tag.value;}// Handle stringified object format like {\"\"value\"\": \"\"tag\"\"}\nif(typeof tag==='string'){// Remove curly braces and quotes to extract clean tag names\nlet cleanTag=tag;// Handle malformed JSON like \"{\\\"finance\\\"\" or \"\\\"economics\\\"\" or \"\\\"investing\\\"}\"\nif(cleanTag.includes('{')||cleanTag.includes('}')||cleanTag.includes('\"')){// Remove all JSON formatting characters\ncleanTag=cleanTag.replace(/[{}]/g,'')// Remove curly braces\n.replace(/\\\\\"/g,'')// Remove escaped quotes\n.replace(/\"/g,'')// Remove regular quotes\n.trim();}// If it's still empty or just whitespace, return empty string\nif(!cleanTag||cleanTag.trim()===''){return'';}return cleanTag;}// If it's just a string or other type, return its string representation\nreturn String(tag);};export const ThreadPage=()=>{const{theme}=useTheme();const[showNewThreadForm,setShowNewThreadForm]=useState(false);const[newThreadTitle,setNewThreadTitle]=useState('');const[newThreadDescription,setNewThreadDescription]=useState('');const[threads,setThreads]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');// Fetch threads from API\nuseEffect(()=>{const fetchThreads=async()=>{try{setLoading(true);const response=await axios.get('http://localhost:3001/api/threads');console.log('Threads response:',response.data);// Process the threads to ensure tags are properly formatted\nconst processedThreads=response.data.map(thread=>{// Process tags to ensure they're an array of strings\nlet processedTags=thread.tags;// If tags is a string that looks like a stringified array, parse it\nif(typeof thread.tags==='string'){try{processedTags=JSON.parse(thread.tags);}catch(_unused){// If parsing fails, split by comma\nprocessedTags=thread.tags.split(',').map(t=>t.trim());}}// Normalize each tag to extract clean string values\nif(Array.isArray(processedTags)){processedTags=processedTags.map(normalizeTag);}else if(processedTags){// If somehow not an array, make it a single-item array\nprocessedTags=[normalizeTag(processedTags)];}else{// Default to empty array if tags is null/undefined\nprocessedTags=[];}return _objectSpread(_objectSpread({},thread),{},{tags:processedTags});});setThreads(processedThreads);setLoading(false);}catch(err){console.error('Error fetching threads:',err);setError('Failed to load threads. Please try again later.');setLoading(false);}};fetchThreads();},[]);const handleSubmitThread=async e=>{e.preventDefault();try{const response=await axios.post('http://localhost:3001/api/threads',{title:newThreadTitle,description:newThreadDescription,tags:['General','Books']});// Make sure to process the new thread's tags too\nconst newThread=_objectSpread(_objectSpread({},response.data),{},{tags:Array.isArray(response.data.tags)?response.data.tags.map(normalizeTag):[]});setThreads([...threads,newThread]);setShowNewThreadForm(false);setNewThreadTitle('');setNewThreadDescription('');}catch(err){console.error('Error creating thread:',err);alert('Failed to create thread. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold transition-colors duration-300 \".concat(theme==='light'?'text-primary-900':theme==='dark'?'text-white':'bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent'),children:\"Book Recommendation Threads\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowNewThreadForm(true),className:\"flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'bg-primary-600 hover:bg-primary-700 text-white':theme==='dark'?'bg-blue-600 hover:bg-blue-700 text-white':'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'),children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"w-5 h-5 mr-2\"}),\"New Thread\"]})]}),showNewThreadForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-6 transition-colors duration-300 \".concat(theme==='light'?'bg-white border border-gray-200':theme==='dark'?'bg-gray-800 border border-gray-700':'bg-gradient-to-br from-pink-50 to-purple-50 border border-purple-200'),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 transition-colors duration-300 \".concat(theme==='light'?'text-gray-900':theme==='dark'?'text-white':'text-purple-900'),children:\"Start a New Thread\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitThread,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium mb-1 transition-colors duration-300 \".concat(theme==='light'?'text-primary-700':theme==='dark'?'text-gray-300':'text-purple-700'),children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",value:newThreadTitle,onChange:e=>setNewThreadTitle(e.target.value),className:\"w-full px-3 py-2 border rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 \".concat(theme==='light'?'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200':theme==='dark'?'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200':'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'),placeholder:\"e.g., Books like The Midnight Library\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium mb-1 transition-colors duration-300 \".concat(theme==='light'?'text-primary-700':theme==='dark'?'text-gray-300':'text-purple-700'),children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:newThreadDescription,onChange:e=>setNewThreadDescription(e.target.value),className:\"w-full px-3 py-2 border rounded-lg min-h-[100px] transition-colors duration-300 focus:outline-none focus:ring-2 \".concat(theme==='light'?'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200':theme==='dark'?'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200':'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'),placeholder:\"Describe what you're looking for...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNewThreadForm(false),className:\"px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'bg-gray-200 hover:bg-gray-300 text-gray-700':theme==='dark'?'bg-gray-600 hover:bg-gray-500 text-gray-300':'bg-purple-200 hover:bg-purple-300 text-purple-700'),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 \".concat(theme==='light'?'bg-primary-600 hover:bg-primary-700 text-white':theme==='dark'?'bg-blue-600 hover:bg-blue-700 text-white':'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'),children:\"Create Thread\"})]})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 transition-colors duration-300 \".concat(theme==='light'?'text-gray-600':theme==='dark'?'text-gray-300':'text-purple-600'),children:\"Loading threads...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 transition-colors duration-300 \".concat(theme==='light'?'text-red-500':theme==='dark'?'text-red-400':'text-pink-600'),children:error}),!loading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4 md:grid-cols-2\",children:threads.length>0?threads.map(thread=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ThreadCard,{id:thread.id,title:thread.title,description:thread.description,upvotes:thread.upvotes,comments:thread.comments,timestamp:new Date(thread.createdAt).toLocaleDateString(),tags:thread.tags||[]})},thread.id)):/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 text-center py-8 transition-colors duration-300 \".concat(theme==='light'?'text-gray-600':theme==='dark'?'text-gray-300':'text-purple-600'),children:\"No threads found. Be the first to create one!\"})})]});};","map":{"version":3,"names":["React","useState","useEffect","ThreadCard","PlusIcon","axios","useTheme","jsx","_jsx","jsxs","_jsxs","normalizeTag","tag","value","cleanTag","includes","replace","trim","String","ThreadPage","theme","showNewThreadForm","setShowNewThreadForm","newThreadTitle","setNewThreadTitle","newThreadDescription","setNewThreadDescription","threads","setThreads","loading","setLoading","error","setError","fetchThreads","response","get","console","log","data","processedThreads","map","thread","processedTags","tags","JSON","parse","_unused","split","t","Array","isArray","_objectSpread","err","handleSubmitThread","e","preventDefault","post","title","description","newThread","alert","className","children","concat","onClick","onSubmit","htmlFor","type","id","onChange","target","placeholder","required","length","upvotes","comments","timestamp","Date","createdAt","toLocaleDateString"],"sources":["/Users/Projects/ChapterOne/src/components/features/ThreadPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ThreadCard } from './ThreadCard';\nimport { PlusIcon } from '@heroicons/react/24/outline';\nimport axios from 'axios';\nimport { useTheme } from '../../contexts/ThemeContext';\n\n// Define Thread interface\ninterface Thread {\n  id: string;\n  title: string;\n  description: string;\n  upvotes: number;\n  comments: number;\n  tags: string[];\n  createdAt: string;\n  updatedAt: string;\n  books?: any[];\n}\n\n// Helper function to normalize tag data - extract it to reuse in other components too\nexport const normalizeTag = (tag: any): string => {\n  if (!tag) return '';\n  \n  // Handle object with value property\n  if (typeof tag === 'object' && tag !== null && 'value' in tag) {\n    return tag.value;\n  }\n  \n  // Handle stringified object format like {\"\"value\"\": \"\"tag\"\"}\n  if (typeof tag === 'string') {\n    // Remove curly braces and quotes to extract clean tag names\n    let cleanTag = tag;\n    \n    // Handle malformed JSON like \"{\\\"finance\\\"\" or \"\\\"economics\\\"\" or \"\\\"investing\\\"}\"\n    if (cleanTag.includes('{') || cleanTag.includes('}') || cleanTag.includes('\"')) {\n      // Remove all JSON formatting characters\n      cleanTag = cleanTag\n        .replace(/[{}]/g, '') // Remove curly braces\n        .replace(/\\\\\"/g, '') // Remove escaped quotes\n        .replace(/\"/g, '') // Remove regular quotes\n        .trim();\n    }\n    \n    // If it's still empty or just whitespace, return empty string\n    if (!cleanTag || cleanTag.trim() === '') {\n      return '';\n    }\n    \n    return cleanTag;\n  }\n  \n  // If it's just a string or other type, return its string representation\n  return String(tag);\n};\n\nexport const ThreadPage = () => {\n  const { theme } = useTheme();\n  const [showNewThreadForm, setShowNewThreadForm] = useState(false);\n  const [newThreadTitle, setNewThreadTitle] = useState('');\n  const [newThreadDescription, setNewThreadDescription] = useState('');\n  const [threads, setThreads] = useState<Thread[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Fetch threads from API\n  useEffect(() => {\n    const fetchThreads = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get<Thread[]>('http://localhost:3001/api/threads');\n        console.log('Threads response:', response.data);\n        \n        // Process the threads to ensure tags are properly formatted\n        const processedThreads = response.data.map(thread => {\n          // Process tags to ensure they're an array of strings\n          let processedTags = thread.tags;\n          \n          // If tags is a string that looks like a stringified array, parse it\n          if (typeof thread.tags === 'string') {\n            try {\n              processedTags = JSON.parse(thread.tags as any);\n            } catch {\n              // If parsing fails, split by comma\n              processedTags = (thread.tags as any).split(',').map((t: string) => t.trim());\n            }\n          }\n          \n          // Normalize each tag to extract clean string values\n          if (Array.isArray(processedTags)) {\n            processedTags = processedTags.map(normalizeTag);\n          } else if (processedTags) {\n            // If somehow not an array, make it a single-item array\n            processedTags = [normalizeTag(processedTags)];\n          } else {\n            // Default to empty array if tags is null/undefined\n            processedTags = [];\n          }\n          \n          return {\n            ...thread,\n            tags: processedTags\n          };\n        });\n        \n        setThreads(processedThreads);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching threads:', err);\n        setError('Failed to load threads. Please try again later.');\n        setLoading(false);\n      }\n    };\n\n    fetchThreads();\n  }, []);\n\n  const handleSubmitThread = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post<Thread>('http://localhost:3001/api/threads', {\n        title: newThreadTitle,\n        description: newThreadDescription,\n        tags: ['General', 'Books']\n      });\n      \n      // Make sure to process the new thread's tags too\n      const newThread = {\n        ...response.data,\n        tags: Array.isArray(response.data.tags) \n          ? response.data.tags.map(normalizeTag) \n          : []\n      };\n      \n      setThreads([...threads, newThread]);\n      setShowNewThreadForm(false);\n      setNewThreadTitle('');\n      setNewThreadDescription('');\n    } catch (err) {\n      console.error('Error creating thread:', err);\n      alert('Failed to create thread. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <h1 className={`text-2xl font-bold transition-colors duration-300 ${\n          theme === 'light'\n            ? 'text-primary-900'\n            : theme === 'dark'\n            ? 'text-white'\n            : 'bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent'\n        }`}>\n          Book Recommendation Threads\n        </h1>\n        <button\n          onClick={() => setShowNewThreadForm(true)}\n          className={`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 ${\n            theme === 'light'\n              ? 'bg-primary-600 hover:bg-primary-700 text-white'\n              : theme === 'dark'\n              ? 'bg-blue-600 hover:bg-blue-700 text-white'\n              : 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'\n          }`}\n        >\n          <PlusIcon className=\"w-5 h-5 mr-2\" />\n          New Thread\n        </button>\n      </div>\n\n      {/* New Thread Form */}\n      {showNewThreadForm && (\n        <div className={`rounded-lg p-6 transition-colors duration-300 ${\n          theme === 'light'\n            ? 'bg-white border border-gray-200'\n            : theme === 'dark'\n            ? 'bg-gray-800 border border-gray-700'\n            : 'bg-gradient-to-br from-pink-50 to-purple-50 border border-purple-200'\n        }`}>\n          <h2 className={`text-xl font-semibold mb-4 transition-colors duration-300 ${\n            theme === 'light'\n              ? 'text-gray-900'\n              : theme === 'dark'\n              ? 'text-white'\n              : 'text-purple-900'\n          }`}>\n            Start a New Thread\n          </h2>\n          <form onSubmit={handleSubmitThread} className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"title\" className={`block text-sm font-medium mb-1 transition-colors duration-300 ${\n                theme === 'light'\n                  ? 'text-primary-700'\n                  : theme === 'dark'\n                  ? 'text-gray-300'\n                  : 'text-purple-700'\n              }`}>\n                Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                value={newThreadTitle}\n                onChange={(e) => setNewThreadTitle(e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 ${\n                  theme === 'light'\n                    ? 'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200'\n                    : theme === 'dark'\n                    ? 'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200'\n                    : 'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'\n                }`}\n                placeholder=\"e.g., Books like The Midnight Library\"\n                required\n              />\n            </div>\n            <div>\n              <label htmlFor=\"description\" className={`block text-sm font-medium mb-1 transition-colors duration-300 ${\n                theme === 'light'\n                  ? 'text-primary-700'\n                  : theme === 'dark'\n                  ? 'text-gray-300'\n                  : 'text-purple-700'\n              }`}>\n                Description\n              </label>\n              <textarea\n                id=\"description\"\n                value={newThreadDescription}\n                onChange={(e) => setNewThreadDescription(e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg min-h-[100px] transition-colors duration-300 focus:outline-none focus:ring-2 ${\n                  theme === 'light'\n                    ? 'bg-white border-gray-300 text-gray-900 focus:border-primary-500 focus:ring-primary-200'\n                    : theme === 'dark'\n                    ? 'bg-gray-700 border-gray-600 text-white focus:border-blue-500 focus:ring-blue-200'\n                    : 'bg-purple-50 border-purple-300 text-purple-900 focus:border-purple-500 focus:ring-purple-200'\n                }`}\n                placeholder=\"Describe what you're looking for...\"\n                required\n              />\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => setShowNewThreadForm(false)}\n                className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 ${\n                  theme === 'light'\n                    ? 'bg-gray-200 hover:bg-gray-300 text-gray-700'\n                    : theme === 'dark'\n                    ? 'bg-gray-600 hover:bg-gray-500 text-gray-300'\n                    : 'bg-purple-200 hover:bg-purple-300 text-purple-700'\n                }`}\n              >\n                Cancel\n              </button>\n              <button type=\"submit\" className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 ${\n                theme === 'light'\n                  ? 'bg-primary-600 hover:bg-primary-700 text-white'\n                  : theme === 'dark'\n                  ? 'bg-blue-600 hover:bg-blue-700 text-white'\n                  : 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white'\n              }`}>\n                Create Thread\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {/* Loading and Error States */}\n      {loading && (\n        <div className={`text-center py-8 transition-colors duration-300 ${\n          theme === 'light'\n            ? 'text-gray-600'\n            : theme === 'dark'\n            ? 'text-gray-300'\n            : 'text-purple-600'\n        }`}>\n          Loading threads...\n        </div>\n      )}\n      {error && (\n        <div className={`text-center py-8 transition-colors duration-300 ${\n          theme === 'light'\n            ? 'text-red-500'\n            : theme === 'dark'\n            ? 'text-red-400'\n            : 'text-pink-600'\n        }`}>\n          {error}\n        </div>\n      )}\n\n      {/* Threads List */}\n      {!loading && !error && (\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          {threads.length > 0 ? (\n            threads.map((thread) => (\n              <div key={thread.id}>\n                <ThreadCard\n                  id={thread.id}\n                  title={thread.title}\n                  description={thread.description}\n                  upvotes={thread.upvotes}\n                  comments={thread.comments}\n                  timestamp={new Date(thread.createdAt).toLocaleDateString()}\n                  tags={thread.tags || []}\n                />\n              </div>\n            ))\n          ) : (\n            <div className={`col-span-2 text-center py-8 transition-colors duration-300 ${\n              theme === 'light'\n                ? 'text-gray-600'\n                : theme === 'dark'\n                ? 'text-gray-300'\n                : 'text-purple-600'\n            }`}>\n              No threads found. Be the first to create one!\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}